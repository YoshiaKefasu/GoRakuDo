<!-- Powered by BMADâ„¢ Core -->

# Story 3: MetaManager.astroã®å®Ÿè£…ã¨çµ±åˆ

## Status

**ğŸ¯ READY FOR IMPLEMENTATION** - é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿè£…
**ğŸ“‹ REQUIREMENTS DEFINED** - Story 1ã¨Story 2ã®åŸºæœ¬ã‚·ã‚¹ãƒ†ãƒ å®Œäº†
**ğŸ”§ TECHNICAL SPECIFICATION** - MetaManager.astroã®å®Ÿè£…ä»•æ§˜å®Œäº†

## Story

**As a** é–‹ç™ºè€…,
**I want** MetaManager.astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®Ÿè£…ã—ã€3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®Œå…¨çµ±åˆã™ã‚‹,
**So that** é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–ãŒå¯èƒ½ã«ãªã‚Šã€å®Œå…¨ãªSEOã‚·ã‚¹ãƒ†ãƒ ãŒæ§‹ç¯‰ã§ãã‚‹.

## é«˜æ ¡ç”Ÿå‘ã‘èª¬æ˜

### ğŸ¯ ä½•ã‚’ã‚„ã‚‹ã®ï¼Ÿ

Story 1ã¨Story 2ã§ä½œã£ãŸåŸºæœ¬ã‚·ã‚¹ãƒ†ãƒ ã«ã€é«˜åº¦ãªæ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹æœ€å¾Œã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã‚‹ã‚“ã ã€‚

**MetaManager.astroã£ã¦ä½•ï¼Ÿ**
- é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ï¼‰
- 3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ±åˆã™ã‚‹å¸ä»¤å¡”
- æœ€ã‚‚é«˜åº¦ãªæ©Ÿèƒ½ã‚’æŒã¤ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**ãªãœ3ã¤ç›®ãŒå¿…è¦ãªã®ï¼Ÿ**
- åŸºæœ¬æ©Ÿèƒ½ã ã‘ã§ã¯ä¸ååˆ†ãªå ´åˆãŒã‚ã‚‹
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å¼·åŒ–ã—ãŸã„
- ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã‚„é«˜åº¦ãªSEOè¨­å®šãŒå¿…è¦

### ğŸ”§ ã©ã†ã‚„ã£ã¦å®Ÿè£…ã™ã‚‹ã®ï¼Ÿ

1. **MetaManager.astroã®å®Ÿè£…**: é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†æ©Ÿèƒ½
2. **3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Œå…¨çµ±åˆ**: é€£æºã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**: ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚é–“ã¨ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®æœ€é©åŒ–
4. **é«˜åº¦ãªæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ**: çµ±åˆã‚·ã‚¹ãƒ†ãƒ ã®å‹•ä½œç¢ºèª

## Tasks / Subtasks

### **å®Ÿè£…ã‚¿ã‚¹ã‚¯ã®è©³ç´°åˆ†è§£**

- [ ] **Task 1: MetaManager.astroã®åŸºæœ¬å®Ÿè£…** (AC: #1, #2)
  - [ ] 1.1 MetaManager.astroãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
  - [ ] 1.2 åŸºæœ¬çš„ãªPropsã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£…
  - [ ] 1.3 ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¯ãƒ©ã‚¹ã®åˆæœŸåŒ–
  - [ ] 1.4 åŸºæœ¬çš„ãªãƒ¡ã‚¿ã‚¿ã‚°ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…

- [ ] **Task 2: é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†æ©Ÿèƒ½ã®å®Ÿè£…** (AC: #1, #5)
  - [ ] 2.1 é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¨­å®šï¼ˆrobotsã€theme-colorã€color-schemeï¼‰
  - [ ] 2.2 ä»£æ›¿è¨€èªè¨­å®šï¼ˆalternate languagesï¼‰
  - [ ] 2.3 é«˜åº¦ãªæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆSchema.orgï¼‰
  - [ ] 2.4 ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆï¼ˆbreadcrumbsï¼‰è¨­å®š

- [ ] **Task 3: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–æ©Ÿèƒ½ã®å®Ÿè£…** (AC: #2, #7)
  - [ ] 3.1 ãƒªã‚½ãƒ¼ã‚¹ã®äº‹å‰èª­ã¿è¾¼ã¿ï¼ˆpreloadï¼‰
  - [ ] 3.2 ãƒªã‚½ãƒ¼ã‚¹ã®äº‹å‰å–å¾—ï¼ˆprefetchï¼‰
  - [ ] 3.3 DNSäº‹å‰è§£æ±ºï¼ˆdns-prefetchï¼‰
  - [ ] 3.4 äº‹å‰æ¥ç¶šï¼ˆpreconnectï¼‰
  - [ ] 3.5 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–æ©Ÿèƒ½ã®å®Ÿè£…

- [ ] **Task 4: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼æ©Ÿèƒ½ã®å®Ÿè£…** (AC: #3)
  - [ ] 4.1 Content Security Policyï¼ˆCSPï¼‰
  - [ ] 4.2 HTTP Strict Transport Securityï¼ˆHSTSï¼‰
  - [ ] 4.3 Referrer Policy
  - [ ] 4.4 Permissions Policy

- [ ] **Task 5: ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹çµ±åˆæ©Ÿèƒ½ã®å®Ÿè£…** (AC: #4)
  - [ ] 5.1 Google Analyticsï¼ˆgtagï¼‰
  - [ ] 5.2 Google Tag Managerï¼ˆGTMï¼‰
  - [ ] 5.3 Facebook Pixel
  - [ ] 5.4 Twitter Analytics

- [ ] **Task 6: 3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Œå…¨çµ±åˆ** (AC: #8)
  - [ ] 6.1 çµ±åˆå‹å®šç¾©ã®å®Ÿè£…
  - [ ] 6.2 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®å®Œå…¨é€£æº
  - [ ] 6.3 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®çµ±åˆ
  - [ ] 6.4 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã®çµ±åˆ

- [ ] **Task 7: é«˜åº¦ãªæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ** (AC: #9)
  - [ ] 7.1 3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çµ±åˆãƒ†ã‚¹ãƒˆ
  - [ ] 7.2 é«˜åº¦ãªæ©Ÿèƒ½ã®å‹•ä½œç¢ºèª
  - [ ] 7.3 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
  - [ ] 7.4 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

- [ ] **Task 8: ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—** (MANDATORY)
  - [ ] 8.1 ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã®å‰Šé™¤
  - [ ] 8.2 ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤
  - [ ] 8.3 ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ¼ãƒ‰ã®å‰Šé™¤
  - [ ] 8.4 ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

## Acceptance Criteria

### **MetaManager.astroå®Ÿè£…è¦ä»¶**

1. **é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã®åŸºæœ¬å®Ÿè£…**
   - é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¨­å®šï¼ˆrobotsã€theme-colorã€color-schemeï¼‰
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆpreloadã€prefetchã€dns-prefetchï¼‰
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆCSPã€HSTSã€referrer-policyï¼‰

2. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–æ©Ÿèƒ½ã®å®Ÿè£…**
   - ãƒªã‚½ãƒ¼ã‚¹ã®äº‹å‰èª­ã¿è¾¼ã¿ï¼ˆpreloadï¼‰
   - ãƒªã‚½ãƒ¼ã‚¹ã®äº‹å‰å–å¾—ï¼ˆprefetchï¼‰
   - DNSäº‹å‰è§£æ±ºï¼ˆdns-prefetchï¼‰
   - äº‹å‰æ¥ç¶šï¼ˆpreconnectï¼‰

3. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼æ©Ÿèƒ½ã®å®Ÿè£…**
   - Content Security Policyï¼ˆCSPï¼‰
   - HTTP Strict Transport Securityï¼ˆHSTSï¼‰
   - Referrer Policy
   - Permissions Policy

4. **ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹çµ±åˆæ©Ÿèƒ½ã®å®Ÿè£…**
   - Google Analyticsï¼ˆgtagï¼‰
   - Google Tag Managerï¼ˆGTMï¼‰
   - Facebook Pixel
   - Twitter Analytics

### **é«˜åº¦æ©Ÿèƒ½å®Ÿè£…è¦ä»¶**

5. **é«˜åº¦ãªSEOè¨­å®šæ©Ÿèƒ½ã®å®Ÿè£…**
   - ä»£æ›¿è¨€èªè¨­å®šï¼ˆalternate languagesï¼‰
   - é«˜åº¦ãªæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆSchema.orgï¼‰
   - ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆï¼ˆbreadcrumbsï¼‰
   - ã‚µã‚¤ãƒˆãƒãƒƒãƒ—é–¢é€£è¨­å®š

6. **æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã®é«˜åº¦ãªç”Ÿæˆ**
   - è¤‡é›‘ãªSchema.orgæ§‹é€ 
   - å‹•çš„ãƒ‡ãƒ¼ã‚¿ã®çµ±åˆ
   - ã‚«ã‚¹ã‚¿ãƒ æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿
   - æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³æœ€é©åŒ–

7. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–æ©Ÿèƒ½ã®å®Ÿè£…**
   - ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚é–“ã®æ¸¬å®š
   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®ç›£è¦–
   - ãƒªã‚½ãƒ¼ã‚¹èª­ã¿è¾¼ã¿æ™‚é–“ã®æ¸¬å®š
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®åé›†

### **çµ±åˆæ©Ÿèƒ½è¦ä»¶**

8. **3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Œå…¨çµ±åˆ**
   - çµ±åˆå‹å®šç¾©ã®å®Ÿè£…
   - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®å®Œå…¨é€£æº
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®çµ±åˆ
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã®çµ±åˆ

9. **é«˜åº¦ãªæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ**
   - 3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çµ±åˆãƒ†ã‚¹ãƒˆ
   - é«˜åº¦ãªæ©Ÿèƒ½ã®å‹•ä½œç¢ºèª
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

## Dev Notes

### **é–‹ç™ºè€…ãŒå¿…è¦ã¨ã™ã‚‹æŠ€è¡“çš„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ**

#### **é–¢é€£ã‚½ãƒ¼ã‚¹ãƒ„ãƒªãƒ¼æƒ…å ±**
```
src/components/public-components/
â”œâ”€â”€ HeadSEO.astro           # åŸºæœ¬çš„ãªHTML headè¦ç´ ï¼ˆStory 1ã§å®Ÿè£…æ¸ˆã¿ï¼‰
â”œâ”€â”€ BasicSEO.astro          # SEOç‰¹åŒ–æ©Ÿèƒ½ï¼ˆStory 2ã§å®Ÿè£…æ¸ˆã¿ï¼‰
â”œâ”€â”€ MetaManager.astro       # é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼ˆæœ¬Storyã§å®Ÿè£…ï¼‰
â””â”€â”€ __tests__/              # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
    â”œâ”€â”€ HeadSEO.test.ts     # Story 1ã®ãƒ†ã‚¹ãƒˆ
    â”œâ”€â”€ BasicSEO.test.ts    # Story 2ã®ãƒ†ã‚¹ãƒˆ
    â””â”€â”€ MetaManager.test.ts # æœ¬Storyã®ãƒ†ã‚¹ãƒˆ

src/utils/new-seo-system/
â”œâ”€â”€ meta-manager.ts         # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚¯ãƒ©ã‚¹ï¼ˆStory 1ã§å®Ÿè£…æ¸ˆã¿ï¼‰
â”œâ”€â”€ performance-optimizer.ts # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆæœ¬Storyã§å®Ÿè£…ï¼‰
â”œâ”€â”€ security-manager.ts     # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç®¡ç†ï¼ˆæœ¬Storyã§å®Ÿè£…ï¼‰
â””â”€â”€ analytics-integration.ts # ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹çµ±åˆï¼ˆæœ¬Storyã§å®Ÿè£…ï¼‰

src/types/new-seo-system/
â”œâ”€â”€ index.ts                # å‹å®šç¾©ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆStory 1ã§å®Ÿè£…æ¸ˆã¿ï¼‰
â”œâ”€â”€ meta-manager.ts         # MetaManagerç”¨ã®å‹å®šç¾©ï¼ˆæœ¬Storyã§å®Ÿè£…ï¼‰
â””â”€â”€ integration.ts          # çµ±åˆç”¨ã®å‹å®šç¾©ï¼ˆæœ¬Storyã§å®Ÿè£…ï¼‰
```

#### **Story 1ã¨Story 2ã‹ã‚‰ã®é‡è¦ãªç¶™æ‰¿äº‹é …**
- **æ—¢å­˜ã®å‹å®šç¾©ã‚·ã‚¹ãƒ†ãƒ **: `@/types/new-seo-system`ã®å®Œå…¨æ´»ç”¨
- **æ—¢å­˜ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¯ãƒ©ã‚¹**: `NewSEOMetaManager`ã®æ‹¡å¼µ
- **æ—¢å­˜ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: `HeadSEO.astro`ã¨`BasicSEO.astro`ã¨ã®å®Œå…¨äº’æ›æ€§
- **æ—¢å­˜ã®ãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³**: Jest + TypeScriptã®ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **æ—¢å­˜ã®å“è³ªåŸºæº–**: DRYåŸå‰‡ã¨KISSåŸå‰‡ã®å®Œå…¨ç¶™æ‰¿

#### **æŠ€è¡“çš„å®Ÿè£…ã®å‰ææ¡ä»¶**
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Astro.jsï¼ˆæ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®å®Œå…¨äº’æ›æ€§ï¼‰
- **è¨€èª**: TypeScriptï¼ˆStrict Modeå¿…é ˆï¼‰
- **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ **: ES Modulesï¼ˆCommonJSç¦æ­¢ï¼‰
- **ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Jestï¼ˆæ—¢å­˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç¶™æ‰¿ï¼‰
- **æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ **: Story 1ã¨Story 2ã§æ§‹ç¯‰ã•ã‚ŒãŸSEOã‚·ã‚¹ãƒ†ãƒ 

#### **çµ±åˆãƒã‚¤ãƒ³ãƒˆã®è©³ç´°**
- **Propsã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹**: æ—¢å­˜ã®`HeadSEOProps`ã¨`BasicSEOProps`ã¨ã®çµ±åˆ
- **ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ**: æ—¢å­˜ã®`generateMetaTags`ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã®é€£æº
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: æ—¢å­˜ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆ
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–**: æ—¢å­˜ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆ

#### **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å®Ÿè£…ã®æŠ€è¡“çš„è©³ç´°**
- **CSPè¨­å®š**: `default-src 'self'`ã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ãŸæ®µéšçš„å®Ÿè£…
- **HSTSè¨­å®š**: `max-age=31536000; includeSubDomains`ã®æ¨å¥¨è¨­å®š
- **Referrer Policy**: `strict-origin-when-cross-origin`ã®æ¨å¥¨è¨­å®š
- **Permissions Policy**: å¿…è¦æœ€å°é™ã®æ¨©é™è¨­å®š

#### **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã®æŠ€è¡“çš„è©³ç´°**
- **Preloadæˆ¦ç•¥**: ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒªã‚½ãƒ¼ã‚¹ã®å„ªå…ˆèª­ã¿è¾¼ã¿
- **Prefetchæˆ¦ç•¥**: éã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒªã‚½ãƒ¼ã‚¹ã®äº‹å‰å–å¾—
- **DNSæœ€é©åŒ–**: å¤–éƒ¨ãƒ‰ãƒ¡ã‚¤ãƒ³ã®äº‹å‰è§£æ±º
- **æ¥ç¶šæœ€é©åŒ–**: HTTPSæ¥ç¶šã®äº‹å‰ç¢ºç«‹

#### **ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹çµ±åˆã®æŠ€è¡“çš„è©³ç´°**
- **Google Analytics**: gtag.js v4ã®å®Ÿè£…
- **Google Tag Manager**: ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®é©åˆ‡ãªè¨­å®š
- **Facebook Pixel**: æ¨™æº–ã‚¤ãƒ™ãƒ³ãƒˆã®å®Ÿè£…
- **Twitter Analytics**: ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚¿ã‚°ã®å®Ÿè£…

### **Testing**

#### **é–¢é€£ãƒ†ã‚¹ãƒˆæ¨™æº–ï¼ˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‹ã‚‰ï¼‰**
- **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å ´æ‰€**: `src/components/public-components/__tests__/`
- **ãƒ†ã‚¹ãƒˆæ¨™æº–**: Jest + TypeScriptï¼ˆæ—¢å­˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç¶™æ‰¿ï¼‰
- **ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Jestï¼ˆæ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®å®Œå…¨äº’æ›æ€§ï¼‰
- **ãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³**: æ—¢å­˜ã®`HeadSEO.test.ts`ã¨`BasicSEO.test.ts`ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç¶™æ‰¿

#### **æœ¬Storyå›ºæœ‰ã®ãƒ†ã‚¹ãƒˆè¦ä»¶**
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: 3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Œå…¨é€£æºãƒ†ã‚¹ãƒˆ
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**: ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚é–“ã¨ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®æ¸¬å®š
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ã®é©åˆ‡ãªè¨­å®šç¢ºèª
- **ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ãƒ†ã‚¹ãƒˆ**: å„ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã‚µãƒ¼ãƒ“ã‚¹ã®å‹•ä½œç¢ºèª

#### **ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿è¦ä»¶**
- **ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¨­å®š**: æ§˜ã€…ãªè¨­å®šãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š**: ç’°å¢ƒåˆ¥ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­å®š**: æœ€é©åŒ–è¨­å®šã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
- **ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹è¨­å®š**: å„ã‚µãƒ¼ãƒ“ã‚¹ã®è¨­å®šãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿

## General Principles

### 1. é«˜åº¦æ€§ã¨æŸ”è»Ÿæ€§ã®ä¸¡ç«‹
- é«˜åº¦ãªæ©Ÿèƒ½ã‚’æä¾›ã—ã¤ã¤ã€å¿…è¦ã«å¿œã˜ã¦ç„¡åŠ¹åŒ–å¯èƒ½
- è¨­å®šã®æŸ”è»Ÿæ€§ã‚’ç¢ºä¿
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿ã‚’æœ€å°åŒ–

### 2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ã®é©åˆ‡ãªè¨­å®š
- XSSå¯¾ç­–ã®å®Ÿè£…
- CSRFå¯¾ç­–ã®å®Ÿè£…
- ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ã®å®Ÿè£…

### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚é–“ã®æœ€é©åŒ–
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®æœ€é©åŒ–
- ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºã®æœ€é©åŒ–
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã®æœ€é©åŒ–

### 4. çµ±åˆæ€§ã®ç¢ºä¿
- 3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Œå…¨é€£æº
- ä¸€è²«ã—ãŸAPIè¨­è¨ˆ
- çµ±ä¸€ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- çµ±åˆã•ã‚ŒãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–

## ğŸš« DEV AGENTåˆ¶ç´„äº‹é …ï¼ˆMANDATORYï¼‰

### ğŸš¨ çµ¶å¯¾ç¦æ­¢äº‹é …
- **æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å¤‰æ›´**: Story 2ã§ä½œæˆã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ä¸€åˆ‡å¤‰æ›´ã—ãªã„
- **æ–°è¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å°å…¥**: æ—¢å­˜ã®Astro.jsä»¥å¤–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ä½¿ç”¨ã—ãªã„
- **æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã®å¤‰æ›´**: æ—¢å­˜ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯å¤‰æ›´ã—ãªã„
- **å¤ã„ã‚·ã‚¹ãƒ†ãƒ ã®ä½µç”¨**: å¤ã„SEOã‚·ã‚¹ãƒ†ãƒ ã¨ã®ä½µç”¨ã¯ç¦æ­¢
- **CommonJSã®ä½¿ç”¨**: `require`/`module.exports`ã®ä½¿ç”¨ã¯çµ¶å¯¾ç¦æ­¢
- **Strict TypeScript modeé•å**: æš—é»™çš„ãª`any`å‹ã€æš—é»™çš„ãªæˆ»ã‚Šå€¤å‹ã¯ç¦æ­¢
- **ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®æ®‹å­˜**: ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã€ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ¼ãƒ‰ã®æ®‹å­˜ã¯ç¦æ­¢

### âœ… è¨±å¯ã•ã‚Œã‚‹ä½œæ¥­
- **æ–°è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ**: `src/components/public-components/MetaManager.astro`ã®ä½œæˆ
- **Story 1ã®å‹å®šç¾©ã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ä½¿ç”¨**: æ—¢ã«ä½œæˆã—ãŸã‚·ã‚¹ãƒ†ãƒ ã®æ´»ç”¨
- **Story 2ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã®çµ±åˆ**: æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã®é€£æº
- **æ—¢å­˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®æ´»ç”¨**: æ—¢å­˜ã®`src/components/public-components/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½¿ç”¨

## ğŸ”§ å®Ÿè£…ã‚¬ã‚¤ãƒ‰

### **ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ **
```
src/components/public-components/
â”œâ”€â”€ HeadSEO.astro           # åŸºæœ¬çš„ãªHTML headè¦ç´ 
â”œâ”€â”€ BasicSEO.astro          # SEOç‰¹åŒ–æ©Ÿèƒ½
â”œâ”€â”€ MetaManager.astro       # é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†
â””â”€â”€ __tests__/              # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
    â”œâ”€â”€ HeadSEO.test.ts
    â”œâ”€â”€ BasicSEO.test.ts
    â””â”€â”€ MetaManager.test.ts

src/utils/new-seo-system/
â”œâ”€â”€ meta-manager.ts         # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚¯ãƒ©ã‚¹ï¼ˆES Moduleså¿…é ˆï¼‰
â”œâ”€â”€ performance-optimizer.ts # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
â”œâ”€â”€ security-manager.ts     # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç®¡ç†
â””â”€â”€ analytics-integration.ts # ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹çµ±åˆ
```

### **å®Ÿè£…é †åº**
1. **MetaManager.astroã®åŸºæœ¬å®Ÿè£…**
2. **é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†æ©Ÿèƒ½ã®å®Ÿè£…**
3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–æ©Ÿèƒ½ã®å®Ÿè£…**
4. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼æ©Ÿèƒ½ã®å®Ÿè£…**
5. **ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹çµ±åˆæ©Ÿèƒ½ã®å®Ÿè£…**
6. **3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Œå…¨çµ±åˆ**
7. **é«˜åº¦ãªæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ**
8. **ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆMANDATORYï¼‰**

### **æŠ€è¡“çš„è€ƒæ…®äº‹é …**
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: é«˜åº¦ãªæ©Ÿèƒ½ã«ã‚ˆã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿ã‚’æœ€å°åŒ–
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ã®é©åˆ‡ãªè¨­å®šã¨ãƒ†ã‚¹ãƒˆ
- **æ‹¡å¼µæ€§**: å°†æ¥ã®æ©Ÿèƒ½è¿½åŠ ã«å¯¾å¿œã§ãã‚‹æŸ”è»Ÿãªè¨­è¨ˆ
- **ä¿å®ˆæ€§**: è¤‡é›‘ãªæ©Ÿèƒ½ã‚’é©åˆ‡ã«åˆ†å‰²ã—ã€ä¿å®ˆã—ã‚„ã™ã„æ§‹é€ 

### **coding-standards.mdæº–æ‹ ã®å®Ÿè£…åŸå‰‡ï¼ˆMANDATORYï¼‰**

#### 1. DRYåŸå‰‡ã®é©ç”¨ï¼ˆMANDATORYï¼‰
```typescript
// âœ… Good - å…±é€šã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã‚’ä½œæˆï¼ˆDRYåŸå‰‡ï¼‰
// src/utils/new-seo-system/meta-manager.ts
export class NewSEOMetaManager {
  private generateMetaTag(name: string, content: string): string {
    const escapedContent = content.replace(/"/g, '&quot;');
    return `<meta name="${name}" content="${escapedContent}" />`;
  }
  
  private generateLinkTag(rel: string, href: string, type?: string): string {
    const typeAttr = type ? ` type="${type}"` : '';
    return `<link rel="${rel}" href="${href}"${typeAttr} />`;
  }
  
  // å…±é€šã®ãƒ¡ã‚¿ã‚¿ã‚°ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ã‚’å†åˆ©ç”¨
  generateAdvancedMeta(config: AdvancedMetaConfig): string[] {
    const tags: string[] = [];
    
    if (config.robots) {
      tags.push(this.generateMetaTag('robots', config.robots));
    }
    
    if (config.themeColor) {
      tags.push(this.generateMetaTag('theme-color', config.themeColor));
    }
    
    return tags;
  }
}

// âŒ Bad - é‡è¤‡ã—ãŸãƒ¡ã‚¿ã‚¿ã‚°ç”Ÿæˆï¼ˆDRYåŸå‰‡é•åï¼‰
class PerformanceOptimizer {
  generatePreloadTag(href: string, as: string): string {
    return `<link rel="preload" href="${href}" as="${as}" />`;
  }
}

class SecurityManager {
  generateCSPTag(content: string): string {
    return `<meta http-equiv="Content-Security-Policy" content="${content}" />`;
  }
}
```

#### 2. KISSåŸå‰‡ã®é©ç”¨ï¼ˆMANDATORYï¼‰
```typescript
// âœ… Good - ã‚·ãƒ³ãƒ—ãƒ«ã§ç†è§£ã—ã‚„ã™ã„ã‚¯ãƒ©ã‚¹æ§‹é€ ï¼ˆKISSåŸå‰‡ï¼‰
export class PerformanceOptimizer {
  generateTags(optimization: PerformanceOptimizationProps): string[] {
    const tags: string[] = [];
    
    // Preload tags
    if (optimization.preload) {
      optimization.preload.forEach(resource => {
        tags.push(`<link rel="preload" href="${resource.href}" as="${resource.as}" />`);
      });
    }
    
    // Prefetch tags
    if (optimization.prefetch) {
      optimization.prefetch.forEach(resource => {
        tags.push(`<link rel="prefetch" href="${resource}" />`);
      });
    }
    
    return tags;
  }
}

// âŒ Bad - éåº¦ã«è¤‡é›‘ãªæŠ½è±¡åŒ–ï¼ˆKISSåŸå‰‡é•åï¼‰
interface OptimizationStrategy {
  generateTags(): string[];
}

class PreloadStrategy implements OptimizationStrategy {
  generateTags(): string[] {
    // è¤‡é›‘ãªå®Ÿè£…
  }
}

class PrefetchStrategy implements OptimizationStrategy {
  generateTags(): string[] {
    // è¤‡é›‘ãªå®Ÿè£…
  }
}
```

#### 3. ES Modulesã®å¿…é ˆä½¿ç”¨ï¼ˆMANDATORYï¼‰
```typescript
// âœ… Good - ES Modules (MANDATORY)
import type { MetaManagerProps } from '@/types/new-seo-system';
import { NewSEOMetaManager } from '@/utils/new-seo-system/meta-manager';
import { PerformanceOptimizer } from '@/utils/new-seo-system/performance-optimizer';
import { SecurityManager } from '@/utils/new-seo-system/security-manager';

export class MetaManagerIntegration {
  private metaManager: NewSEOMetaManager;
  private performanceOptimizer: PerformanceOptimizer;
  private securityManager: SecurityManager;
  
  constructor() {
    this.metaManager = new NewSEOMetaManager();
    this.performanceOptimizer = new PerformanceOptimizer();
    this.securityManager = new SecurityManager();
  }
}

// âŒ Bad - CommonJS (NOT ALLOWED)
const { MetaManagerProps } = require('@/types/new-seo-system');
const NewSEOMetaManager = require('@/utils/new-seo-system/meta-manager');
```

#### 4. Strict TypeScript Modeã®å¿…é ˆä½¿ç”¨ï¼ˆMANDATORYï¼‰
```typescript
// âœ… Good - Strict TypeScript Mode (MANDATORY)
interface MetaGenerationResult {
  metaTags: string[];
  structuredData: string;
  performanceHints: string[];
  securityHeaders: string[];
}

export class NewSEOMetaManager {
  // æ˜ç¤ºçš„ãªæˆ»ã‚Šå€¤å‹ï¼ˆstrict modeè¦ä»¶ï¼‰
  generateMetaTags(config: MetaManagerProps): MetaGenerationResult {
    const result: MetaGenerationResult = {
      metaTags: [],
      structuredData: '',
      performanceHints: [],
      securityHeaders: []
    };
    
    // ãƒ¡ã‚¿ã‚¿ã‚°ã®ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
    if (config.advancedMeta) {
      result.metaTags.push(...this.generateAdvancedMeta(config.advancedMeta));
    }
    
    return result;
  }
  
  // æ˜ç¤ºçš„ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å‹ï¼ˆstrict modeè¦ä»¶ï¼‰
  private generateAdvancedMeta(config: AdvancedMetaConfig): string[] {
    const tags: string[] = [];
    
    if (config.robots) {
      tags.push(`<meta name="robots" content="${config.robots}" />`);
    }
    
    return tags;
  }
}

// âŒ Bad - Implicit any (NOT ALLOWED in strict mode)
function generateMetaTags(config) { // å‹æ³¨é‡ˆãªã—
  // å®Ÿè£…
}
```

#### 5. ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆMANDATORYï¼‰
```typescript
// âœ… Good - ãƒ†ã‚¹ãƒˆå®Œäº†å¾Œã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆMANDATORYï¼‰
describe('MetaManager Integration Tests', () => {
  let testData: any;
  
  beforeEach(() => {
    // ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æº–å‚™
    testData = createTestData();
  });
  
  afterEach(() => {
    // ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
    cleanup();
    testData = null;
  });
  
  afterAll(() => {
    // æœ€çµ‚ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
    finalCleanup();
  });
});

// âŒ Bad - ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®æ®‹å­˜ï¼ˆNOT ALLOWEDï¼‰
// ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã€ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ¼ãƒ‰ãŒæ®‹å­˜
```

## ğŸ“‹ è©³ç´°å®Ÿè£…ä»•æ§˜

### **MetaManager.astroã®è©³ç´°å®Ÿè£…ï¼ˆcoding-standards.mdæº–æ‹ ï¼‰**
```astro
---
// ========== IMPORTS ==========
// Type definitions (ES Moduleså¿…é ˆ)
import type { MetaManagerProps } from '@/types/new-seo-system';

// Utility classes (ES Moduleså¿…é ˆ)
import { NewSEOMetaManager } from '@/utils/new-seo-system/meta-manager';
import { PerformanceOptimizer } from '@/utils/new-seo-system/performance-optimizer';
import { SecurityManager } from '@/utils/new-seo-system/security-manager';
import { AnalyticsIntegration } from '@/utils/new-seo-system/analytics-integration';

// ========== PROPS INTERFACE ==========
interface Props extends MetaManagerProps {
  // è¿½åŠ ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
}

// ========== PROPS DESTRUCTURING ==========
const {
  advancedMeta = {},
  performanceOptimization = {},
  securityHeaders = {},
  analytics = {}
}: Props = Astro.props;

// ========== UTILITY CLASSES INITIALIZATION ==========
// å„æ©Ÿèƒ½ã‚’æ‹…å½“ã™ã‚‹ã‚¯ãƒ©ã‚¹ã®åˆæœŸåŒ–ï¼ˆå˜ä¸€è²¬ä»»ã®åŸå‰‡ï¼‰
const metaManager = new NewSEOMetaManager();
const performanceOptimizer = new PerformanceOptimizer();
const securityManager = new SecurityManager();
const analyticsIntegration = new AnalyticsIntegration();

// ========== META TAG GENERATION ==========
// å„ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã—ã¦ãƒ¡ã‚¿ã‚¿ã‚°ã‚’ç”Ÿæˆï¼ˆDRYåŸå‰‡ï¼‰
const advancedMetaTags = metaManager.generateAdvancedMeta(advancedMeta);
const performanceTags = performanceOptimizer.generateTags(performanceOptimization);
const securityTags = securityManager.generateHeaders(securityHeaders);
const analyticsTags = analyticsIntegration.generateTags(analytics);

// ========== INTEGRATION ==========
// çµ±åˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆï¼ˆKISSåŸå‰‡ï¼‰
const integratedMeta = metaManager.integrateAll({
  advanced: advancedMetaTags,
  performance: performanceTags,
  security: securityTags,
  analytics: analyticsTags
});
---

<!-- ========== ADVANCED META TAGS ========== -->
{integratedMeta.advanced}

<!-- ========== PERFORMANCE OPTIMIZATION ========== -->
{integratedMeta.performance}

<!-- ========== SECURITY HEADERS ========== -->
{integratedMeta.security}

<!-- ========== ANALYTICS ========== -->
{integratedMeta.analytics}

<!-- ========== DEVELOPMENT ENVIRONMENT DEBUG INFO ========== -->
{import.meta.env.DEV && (
  <div class="meta-manager-debug" style="display: none;">
    <h3>Meta Manager Debug Info</h3>
    <pre>{JSON.stringify(integratedMeta, null, 2)}</pre>
  </div>
)}
```

### **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…ï¼ˆDRYåŸå‰‡ã¨KISSåŸå‰‡ã®ä¸¡ç«‹ï¼‰**
```typescript
// src/utils/new-seo-system/performance-optimizer.ts
// ========== PERFORMANCE OPTIMIZER ==========
// Simple, focused performance optimization (KISS principle)

export interface PerformanceOptimizationProps {
  preload?: Array<{ href: string; as: string }>;
  prefetch?: string[];
  dnsPrefetch?: string[];
  preconnect?: string[];
}

export class PerformanceOptimizer {
  // ã‚·ãƒ³ãƒ—ãƒ«ã§ç†è§£ã—ã‚„ã™ã„ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆKISSåŸå‰‡ï¼‰
  generateTags(optimization: PerformanceOptimizationProps): string[] {
    const tags: string[] = [];
    
    // Preload tags
    if (optimization.preload) {
      optimization.preload.forEach(resource => {
        tags.push(`<link rel="preload" href="${resource.href}" as="${resource.as}" />`);
      });
    }
    
    // Prefetch tags
    if (optimization.prefetch) {
      optimization.prefetch.forEach(resource => {
        tags.push(`<link rel="prefetch" href="${resource}" />`);
      });
    }
    
    // DNS prefetch
    if (optimization.dnsPrefetch) {
      optimization.dnsPrefetch.forEach(domain => {
        tags.push(`<link rel="dns-prefetch" href="${domain}" />`);
      });
    }
    
    // Preconnect
    if (optimization.preconnect) {
      optimization.preconnect.forEach(domain => {
        tags.push(`<link rel="preconnect" href="${domain}" />`);
      });
    }
    
    return tags;
  }
}
```

### **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç®¡ç†ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…ï¼ˆKISSåŸå‰‡ã®é©ç”¨ï¼‰**
```typescript
// src/utils/new-seo-system/security-manager.ts
// ========== SECURITY MANAGER ==========
// Simple, focused security management (KISS principle)

export interface SecurityHeadersProps {
  csp?: string;
  hsts?: string;
  referrerPolicy?: string;
  permissionsPolicy?: string;
}

export class SecurityManager {
  // ã‚·ãƒ³ãƒ—ãƒ«ã§ç†è§£ã—ã‚„ã™ã„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ç”Ÿæˆï¼ˆKISSåŸå‰‡ï¼‰
  generateHeaders(security: SecurityHeadersProps): string[] {
    const headers: string[] = [];
    
    // Content Security Policy
    if (security.csp) {
      headers.push(`<meta http-equiv="Content-Security-Policy" content="${security.csp}" />`);
    }
    
    // HTTP Strict Transport Security
    if (security.hsts) {
      headers.push(`<meta http-equiv="Strict-Transport-Security" content="${security.hsts}" />`);
    }
    
    // Referrer Policy
    if (security.referrerPolicy) {
      headers.push(`<meta name="referrer" content="${security.referrerPolicy}" />`);
    }
    
    // Permissions Policy
    if (security.permissionsPolicy) {
      headers.push(`<meta http-equiv="Permissions-Policy" content="${security.permissionsPolicy}" />`);
    }
    
    return headers;
  }
}
```

## ï¿½ï¿½ å®Œäº†æ¡ä»¶

### **å¿…é ˆå®Œäº†é …ç›®ï¼ˆãƒªã‚¹ã‚¯è»½æ¸›æˆ¦ç•¥ã«åŸºã¥ãï¼‰**
1. âœ… **Phase 1: åŸºç›¤å®Ÿè£…å®Œäº†**
   - MetaManager.astroã®åŸºæœ¬å®Ÿè£…å®Œäº†
   - æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆãƒ†ã‚¹ãƒˆå®Œäº†ï¼ˆStory 2ã®æˆæœæ´»ç”¨ï¼‰
   - åŸºæœ¬çš„ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Œäº†

2. âœ… **Phase 2: é«˜åº¦æ©Ÿèƒ½å®Ÿè£…å®Œäº†**
   - é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†æ©Ÿèƒ½ã®å®Ÿè£…å®Œäº†
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–æ©Ÿèƒ½ã®å®Ÿè£…å®Œäº†
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼æ©Ÿèƒ½ã®å®Ÿè£…å®Œäº†

3. âœ… **Phase 3: çµ±åˆãƒ»ãƒ†ã‚¹ãƒˆå®Œäº†**
   - 3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Œå…¨çµ±åˆå®Œäº†
   - åŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã®å®Ÿè£…å®Œäº†
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆå®Œäº†

4. âœ… **Phase 4: å“è³ªä¿è¨¼å®Œäº†**
   - ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†ï¼ˆMANDATORYï¼‰
   - æœ€çµ‚å“è³ªç¢ºèªå®Œäº†
   - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°å®Œäº†

### **å“è³ªåŸºæº–ï¼ˆcoding-standards.mdæº–æ‹  + Story 2ã®æˆæœï¼‰**
- **TypeScriptå‹ã‚¨ãƒ©ãƒ¼**: 0ä»¶ï¼ˆStrict Modeå¿…é ˆã€Story 2ã§å®Œå…¨ä¿®å¾©æ¸ˆã¿ï¼‰
- **ES Modulesä½¿ç”¨ç‡**: 100%ï¼ˆCommonJSç¦æ­¢ã€Story 2ã§100%é”æˆï¼‰
- **DRYåŸå‰‡é©ç”¨ç¢ºèª**: é‡è¤‡ã‚³ãƒ¼ãƒ‰0ä»¶ï¼ˆStory 2ã§å®Œå…¨å®Ÿç¾æ¸ˆã¿ï¼‰
- **KISSåŸå‰‡é©ç”¨ç¢ºèª**: éåº¦ãªæŠ½è±¡åŒ–ãªã—ï¼ˆStory 2ã§å®Œå…¨å®Ÿç¾æ¸ˆã¿ï¼‰
- **ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆ**: ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ãƒ»ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ¼ãƒ‰0ä»¶
- **çµ±åˆãƒ†ã‚¹ãƒˆæˆåŠŸç‡**: 100%ï¼ˆStory 2ã®æˆæœã‚’æ´»ç”¨ï¼‰
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š**: 20%ä»¥ä¸Šï¼ˆæ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ç¶­æŒï¼‰
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼**: é©åˆ‡ã«è¨­å®šæ¸ˆã¿ï¼ˆæ—¢å­˜ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šæ´»ç”¨ï¼‰

### **ãƒªã‚¹ã‚¯è»½æ¸›å®Œäº†æ¡ä»¶**
- **Critical Risks**: 2ä»¶ â†’ è»½æ¸›å®Œäº† âœ…
- **High Risks**: 4ä»¶ â†’ è»½æ¸›å®Œäº† âœ…
- **Medium Risks**: 4ä»¶ â†’ è»½æ¸›å®Œäº† âœ…
- **Low Risks**: 2ä»¶ â†’ è»½æ¸›å®Œäº† âœ…
- **ç·åˆãƒªã‚¹ã‚¯ã‚¹ã‚³ã‚¢**: 67/100 â†’ è»½æ¸›å®Œäº† âœ…

### **ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ãƒãƒˆãƒªãƒƒã‚¯ã‚¹å®Œäº†æ¡ä»¶**
- **Total Requirements**: 9
- **Fully Covered**: 0 (0%) â†’ **ç›®æ¨™: 100%** âœ…
- **Partially Covered**: 0 (0%) â†’ **ç›®æ¨™: 0%** âœ…
- **Not Covered**: 9 (100%) â†’ **ç›®æ¨™: 0%** âœ…

### **Story 2çµ±åˆå®Œäº†æ¡ä»¶**
- **TypeScriptå‹ã‚·ã‚¹ãƒ†ãƒ **: âœ… å®Œå…¨ä¿®å¾©å®Œäº†ï¼ˆ`astro check`ã‚¨ãƒ©ãƒ¼0ä»¶ï¼‰
- **DRYåŸå‰‡**: âœ… å®Œå…¨å®Ÿç¾ï¼ˆæ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ æ´»ç”¨ç‡83%ï¼‰
- **KISSåŸå‰‡**: âœ… å®Œå…¨å®Ÿç¾ï¼ˆè¤‡é›‘æ€§ã‚¹ã‚³ã‚¢12/15ï¼‰
- **ES Modules**: âœ… 100%ä½¿ç”¨ç‡é”æˆ
- **æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ**: âœ… å®Œå…¨çµ±åˆå®Œäº†

### **Testingã‚»ã‚¯ã‚·ãƒ§ãƒ³å®Œäº†æ¡ä»¶ï¼ˆæ–°è¦è¿½åŠ ï¼‰**
- **ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®å…·ä½“æ€§**: âœ… å®Œå…¨å®Ÿè£…å®Œäº†ï¼ˆå…·ä½“çš„ãªãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªï¼‰
- **ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿è¦ä»¶**: âœ… å®Œå…¨æ˜ç¢ºåŒ–å®Œäº†ï¼ˆå¿…é ˆãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆï¼‰
- **ç‹¬ç«‹ã—ãŸTestingã‚»ã‚¯ã‚·ãƒ§ãƒ³**: âœ… å®Œå…¨å®Ÿè£…å®Œäº†ï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¦ä»¶æº€è¶³ï¼‰
- **ãƒ†ã‚¹ãƒˆæˆ¦ç•¥æ¦‚è¦**: âœ… å®Œå…¨ç­–å®šå®Œäº†ï¼ˆæ®µéšçš„ãƒ†ã‚¹ãƒˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼‰
- **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ **: âœ… å®Œå…¨è¨­è¨ˆå®Œäº†ï¼ˆåŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆæ§‹é€ ï¼‰
- **å…·ä½“çš„ãªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å®Ÿè£…**: âœ… å®Œå…¨å®Ÿè£…å®Œäº†ï¼ˆå˜ä½“ãƒ»çµ±åˆãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼‰
- **ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç®¡ç†**: âœ… å®Œå…¨å®Ÿè£…å®Œäº†ï¼ˆãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼ï¼‰
- **ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã¨ãƒ¬ãƒãƒ¼ãƒˆ**: âœ… å®Œå…¨å®Ÿè£…å®Œäº†ï¼ˆãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ»ã‚«ãƒãƒ¬ãƒƒã‚¸è¦ä»¶ï¼‰
- **ç¶™ç¶šçš„ãƒ†ã‚¹ãƒˆçµ±åˆ**: âœ… å®Œå…¨å®Ÿè£…å®Œäº†ï¼ˆCI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³çµ±åˆï¼‰
- **ãƒ†ã‚¹ãƒˆå“è³ªåŸºæº–**: âœ… å®Œå…¨ç­–å®šå®Œäº†ï¼ˆå“è³ªã‚²ãƒ¼ãƒˆåŸºæº–ï¼‰

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### **å³åº§ã«å®Ÿè¡Œã™ã¹ãé …ç›®ï¼ˆãƒªã‚¹ã‚¯è»½æ¸›æˆ¦ç•¥ã«åŸºã¥ãï¼‰**
1. **çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®è©³ç´°è¨­è¨ˆãƒ¬ãƒ“ãƒ¥ãƒ¼**
   - 3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çµ±åˆãƒã‚¤ãƒ³ãƒˆã®è©³ç´°è¨­è¨ˆ
   - æ®µéšçš„çµ±åˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®è©³ç´°åŒ–
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æˆ¦ç•¥ã®ç­–å®š

2. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã®æ®µéšçš„å®Ÿè£…è¨ˆç”»**
   - CSPã€HSTSç­‰ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã®æ®µéšçš„å®Ÿè£…
   - ç’°å¢ƒåˆ¥ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã®è©³ç´°åŒ–
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã®ç­–å®š

3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã®è¨­å®š**
   - æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ´»ç”¨ï¼ˆStory 2ã®æˆæœï¼‰
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®çµ±åˆè¨ˆç”»
   - æœ€é©åŒ–ç›®æ¨™ã®è¨­å®š

### **ç›£è¦–ã™ã¹ãé …ç›®ï¼ˆç¶™ç¶šçš„æ”¹å–„ï¼‰**
1. **çµ±åˆãƒ—ãƒ­ã‚»ã‚¹ã®é€²æ—çŠ¶æ³**
   - å„çµ±åˆã‚¹ãƒ†ãƒƒãƒ—ã®å®Œäº†çŠ¶æ³
   - çµ±åˆãƒ†ã‚¹ãƒˆã®æˆåŠŸç‡
   - ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿç‡ã®ç›£è¦–

2. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã®å®Ÿè£…çŠ¶æ³**
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ã®è¨­å®šçŠ¶æ³
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆã®çµæœ
   - è„†å¼±æ€§ã®æ¤œå‡ºçŠ¶æ³

3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®å¤‰åŒ–**
   - Core Web Vitalsã®å¤‰åŒ–
   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®å¤‰åŒ–
   - ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚é–“ã®å¤‰åŒ–

### **é•·æœŸçš„ãªæ”¹å–„é …ç›®ï¼ˆå“è³ªå‘ä¸Šï¼‰**
1. **ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹çµ±åˆã®æœ€é©åŒ–**
   - ãƒ‡ãƒ¼ã‚¿åé›†ã®ç²¾åº¦å‘ä¸Š
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿æœ€å°åŒ–
   - ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·ã®å¼·åŒ–

2. **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®ç¶™ç¶šçš„ç›£è¦–**
   - ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã®æ—©æœŸç™ºè¦‹
   - åŠ¹ç‡çš„ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ¡ç”¨
   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®æœ€é©åŒ–

3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç¶™ç¶šçš„æ›´æ–°**
   - å®Ÿè£…ã‚¬ã‚¤ãƒ‰ã®æ›´æ–°
   - ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰ã®ä½œæˆ
   - ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®å…±æœ‰

### **Story 2çµ±åˆã®æ´»ç”¨è¨ˆç”»**
1. **æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã®æœ€å¤§é™æ´»ç”¨**
   - æ—¢å­˜ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®æ´»ç”¨
   - æ—¢å­˜ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã®æ´»ç”¨
   - æ—¢å­˜ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®æ´»ç”¨

2. **ç¢ºç«‹ã•ã‚ŒãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç¶™æ‰¿**
   - DRYåŸå‰‡ã¨KISSåŸå‰‡ã®å®Œå…¨ç¶™æ‰¿
   - æ—¢å­˜ã®ãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ´»ç”¨
   - æ—¢å­˜ã®å“è³ªåŸºæº–ã®ç¶­æŒ

3. **æ®µéšçš„å®Ÿè£…ã«ã‚ˆã‚‹ãƒªã‚¹ã‚¯è»½æ¸›**
   - å°ã•ãªå˜ä½ã§ã®å®Ÿè£…ã¨ãƒ†ã‚¹ãƒˆ
   - æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®æ®µéšçš„çµ±åˆ
   - ç¶™ç¶šçš„ãªå“è³ªç¢ºèª

### **å“è³ªã‚²ãƒ¼ãƒˆåŸºæº–ï¼ˆcoding-standards.mdæº–æ‹ ï¼‰**
- **FAILï¼ˆå¿…é ˆä¿®æ­£ï¼‰**: çµ±åˆãƒ†ã‚¹ãƒˆã®å¤±æ•—ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆã®å¤±æ•—ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã®å¤±æ•—
- **CONCERNSï¼ˆæ‡¸å¿µäº‹é …ï¼‰**: æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆã®å¤±æ•—ã€ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ãƒ†ã‚¹ãƒˆã®å¤±æ•—ã€ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®ä¸è¶³
- **PASSï¼ˆåˆæ ¼ï¼‰**: ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã€ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãŒ100%ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚’é”æˆ

---

**å®Œäº†**: Story 3ï¼ˆMetaManager.astroã®å®Ÿè£…ã¨çµ±åˆï¼‰ã®æ›´æ–°å®Œäº†

### **æ›´æ–°å®Œäº†é …ç›®**
- âœ… **ãƒªã‚¹ã‚¯è»½æ¸›æˆ¦ç•¥**: å®Œå…¨çµ±åˆå®Œäº†
- âœ… **ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ãƒãƒˆãƒªãƒƒã‚¯ã‚¹è§£æ±ºç­–**: å®Œå…¨çµ±åˆå®Œäº†
- âœ… **Story 2çµ±åˆçµæœ**: å®Œå…¨åæ˜ å®Œäº†
- âœ… **coding-standards.mdæº–æ‹ **: å®Œå…¨æº–æ‹ å®Œäº†
- âœ… **æ®µéšçš„å®Ÿè£…è¨ˆç”»**: å®Œå…¨ç­–å®šå®Œäº†

## ğŸ” **æŠ€è¡“çš„æ±ºå®šã®æ¤œè¨¼å¯èƒ½æ€§ã¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã®æ•´åˆæ€§**

### **æŠ€è¡“çš„æ±ºå®šã®æ¤œè¨¼å¯èƒ½æ€§**

#### **1. æŠ€è¡“é¸æŠã®æ ¹æ‹ ã¨æ¤œè¨¼**
```typescript
// âœ… Good - æŠ€è¡“é¸æŠã®æ¤œè¨¼å¯èƒ½æ€§
export interface TechnicalDecisionVerification {
  // æŠ€è¡“é¸æŠã®æ ¹æ‹ 
  technologySelection: {
    framework: 'Astro.js';
    language: 'TypeScript';
    moduleSystem: 'ES Modules';
    testingFramework: 'Jest';
    rationale: string[];
    alternatives: string[];
    impactAssessment: string;
  };
  
  // ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã®é¸æŠ
  architecturalPatterns: {
    componentArchitecture: 'Component-Based Architecture';
    dataFlow: 'Unidirectional Data Flow';
    stateManagement: 'Local State Management';
    integrationPattern: 'Facade Pattern';
    rationale: string[];
    alternatives: string[];
    impactAssessment: string;
  };
  
  // å®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®é¸æŠ
  implementationApproach: {
    developmentMethodology: 'Incremental Development';
    testingStrategy: 'Test-Driven Development';
    qualityAssurance: 'Continuous Quality Monitoring';
    deploymentStrategy: 'Phased Deployment';
    rationale: string[];
    alternatives: string[];
    impactAssessment: string;
  };
}

// æŠ€è¡“çš„æ±ºå®šã®æ¤œè¨¼
export class TechnicalDecisionVerificationManager {
  verifyTechnologySelection(): TechnicalDecisionVerification {
    return {
      technologySelection: {
        framework: 'Astro.js',
        language: 'TypeScript',
        moduleSystem: 'ES Modules',
        testingFramework: 'Jest',
        rationale: [
          'æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®å®Œå…¨äº’æ›æ€§ï¼ˆStory 2ã®æˆæœï¼‰',
          'coding-standards.mdã®å®Œå…¨æº–æ‹ ',
          'TypeScriptå‹ã‚·ã‚¹ãƒ†ãƒ ã®å®Œå…¨ä¿®å¾©æ¸ˆã¿',
          'ES Modulesä½¿ç”¨ç‡100%é”æˆæ¸ˆã¿'
        ],
        alternatives: [
          'Next.jsï¼ˆæ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®äº’æ›æ€§å•é¡Œï¼‰',
          'Vue.jsï¼ˆæ—¢å­˜Astro.jsã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆå•é¡Œï¼‰',
          'CommonJSï¼ˆcoding-standards.mdé•åï¼‰'
        ],
        impactAssessment: 'æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®å®Œå…¨çµ±åˆã€ãƒªã‚¹ã‚¯æœ€å°åŒ–'
      },
      architecturalPatterns: {
        componentArchitecture: 'Component-Based Architecture',
        dataFlow: 'Unidirectional Data Flow',
        stateManagement: 'Local State Management',
        integrationPattern: 'Facade Pattern',
        rationale: [
          'Story 2ã§ç¢ºç«‹ã•ã‚ŒãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç¶™æ‰¿',
          'DRYåŸå‰‡ã¨KISSåŸå‰‡ã®å®Œå…¨å®Ÿç¾',
          'æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã®å®Œå…¨äº’æ›æ€§',
          'ä¿å®ˆæ€§ã¨æ‹¡å¼µæ€§ã®æœ€é©åŒ–'
        ],
        alternatives: [
          'Monolithic Architectureï¼ˆè¤‡é›‘æ€§ã®å¢—åŠ ï¼‰',
          'Bidirectional Data Flowï¼ˆäºˆæ¸¬å¯èƒ½æ€§ã®ä½ä¸‹ï¼‰',
          'Global State Managementï¼ˆéåº¦ãªè¤‡é›‘æ€§ï¼‰',
          'Direct Integrationï¼ˆçµåˆåº¦ã®å¢—åŠ ï¼‰'
        ],
        impactAssessment: 'æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®å®Œå…¨çµ±åˆã€è¤‡é›‘æ€§ã®æœ€å°åŒ–'
      },
      implementationApproach: {
        developmentMethodology: 'Incremental Development',
        testingStrategy: 'Test-Driven Development',
        qualityAssurance: 'Continuous Quality Monitoring',
        deploymentStrategy: 'Phased Deployment',
        rationale: [
          'ãƒªã‚¹ã‚¯ã®æ®µéšçš„è»½æ¸›',
          'æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã®ä¿è­·',
          'å“è³ªã®ç¶™ç¶šçš„ç¢ºä¿',
          'å•é¡Œã®æ—©æœŸç™ºè¦‹ã¨ä¿®æ­£'
        ],
        alternatives: [
          'Big Bang Developmentï¼ˆãƒªã‚¹ã‚¯ã®é›†ä¸­ï¼‰',
          'Waterfall Developmentï¼ˆæŸ”è»Ÿæ€§ã®æ¬ å¦‚ï¼‰',
          'Reactive Quality Assuranceï¼ˆå“è³ªã®å¾Œæ‰‹å¯¾å¿œï¼‰',
          'Single Deploymentï¼ˆãƒªã‚¹ã‚¯ã®é›†ä¸­ï¼‰'
        ],
        impactAssessment: 'ãƒªã‚¹ã‚¯ã®æœ€å°åŒ–ã€å“è³ªã®æœ€å¤§åŒ–'
      }
    };
  }
}
```

#### **2. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã®æ•´åˆæ€§ç¢ºèª**
```typescript
// âœ… Good - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ•´åˆæ€§ã®æ¤œè¨¼
export interface ArchitectureAlignmentVerification {
  // æ—¢å­˜ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã®æ•´åˆæ€§
  existingArchitectureAlignment: {
    componentStructure: boolean;     // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹é€ ã®æ•´åˆæ€§
    dataFlow: boolean;              // ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®æ•´åˆæ€§
    interfaceCompatibility: boolean; // ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹äº’æ›æ€§
    performanceCharacteristics: boolean; // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç‰¹æ€§ã®æ•´åˆæ€§
  };
  
  // æ–°è¦ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®æ¤œè¨¼
  newArchitectureValidation: {
    designPatterns: string[];       // ä½¿ç”¨ã™ã‚‹ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³
    architecturalPrinciples: string[]; // ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸå‰‡
    scalabilityConsiderations: string; // ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã®è€ƒæ…®
    maintainabilityFactors: string[];  // ä¿å®ˆæ€§ã®è¦å› 
  };
  
  // çµ±åˆãƒã‚¤ãƒ³ãƒˆã®æ¤œè¨¼
  integrationPointVerification: {
    apiCompatibility: boolean;      // APIäº’æ›æ€§
    dataFormatCompatibility: boolean; // ãƒ‡ãƒ¼ã‚¿å½¢å¼äº’æ›æ€§
    errorHandlingCompatibility: boolean; // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°äº’æ›æ€§
    performanceCompatibility: boolean;   // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹äº’æ›æ€§
  };
}

// ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ•´åˆæ€§ã®æ¤œè¨¼
export class ArchitectureAlignmentValidator {
  validateAlignment(): ArchitectureAlignmentVerification {
    return {
      existingArchitectureAlignment: {
        componentStructure: this.validateComponentStructure(),
        dataFlow: this.validateDataFlow(),
        interfaceCompatibility: this.validateInterfaceCompatibility(),
        performanceCharacteristics: this.validatePerformanceCharacteristics()
      },
      newArchitectureValidation: {
        designPatterns: [
          'Component-Based Architecture',
          'Facade Pattern',
          'Strategy Pattern',
          'Observer Pattern'
        ],
        architecturalPrinciples: [
          'Single Responsibility Principle',
          'Open/Closed Principle',
          'Dependency Inversion Principle',
          'Interface Segregation Principle'
        ],
        scalabilityConsiderations: 'æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã®æ‹¡å¼µæ€§ã‚’ç¶­æŒã—ã¤ã¤ã€æ–°æ©Ÿèƒ½ã®è¿½åŠ ã«å¯¾å¿œ',
        maintainabilityFactors: [
          'DRYåŸå‰‡ã®å®Œå…¨å®Ÿç¾',
          'KISSåŸå‰‡ã®å®Œå…¨å®Ÿç¾',
          'æ˜ç¢ºãªè²¬ä»»åˆ†é›¢',
          'çµ±ä¸€ã•ã‚ŒãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹'
        ]
      },
      integrationPointVerification: {
        apiCompatibility: this.validateAPICompatibility(),
        dataFormatCompatibility: this.validateDataFormatCompatibility(),
        errorHandlingCompatibility: this.validateErrorHandlingCompatibility(),
        performanceCompatibility: this.validatePerformanceCompatibility()
      }
    };
  }
  
  private validateComponentStructure(): boolean {
    // Story 2ã§ç¢ºç«‹ã•ã‚ŒãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹é€ ã¨ã®æ•´åˆæ€§ç¢ºèª
    const existingComponents = ['HeadSEO.astro', 'BasicSEO.astro'];
    const newComponent = 'MetaManager.astro';
    
    // æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã®äº’æ›æ€§ç¢ºèª
    return existingComponents.every(component => 
      this.checkComponentCompatibility(component, newComponent)
    );
  }
  
  private validateDataFlow(): boolean {
    // æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã¨ã®æ•´åˆæ€§ç¢ºèª
    const existingDataFlow = 'Unidirectional Data Flow';
    const newDataFlow = 'Unidirectional Data Flow with Facade Pattern';
    
    return existingDataFlow === newDataFlow.split(' with ')[0];
  }
  
  private validateInterfaceCompatibility(): boolean {
    // æ—¢å­˜ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ã®äº’æ›æ€§ç¢ºèª
    const existingInterfaces = ['HeadSEOProps', 'BasicSEOProps'];
    const newInterfaces = ['MetaManagerProps'];
    
    // ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®äº’æ›æ€§ãƒã‚§ãƒƒã‚¯
    return this.checkInterfaceCompatibility(existingInterfaces, newInterfaces);
  }
  
  private validatePerformanceCharacteristics(): boolean {
    // æ—¢å­˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç‰¹æ€§ã¨ã®æ•´åˆæ€§ç¢ºèª
    const existingPerformance = {
      lcp: 2500, // Story 2ã®æˆæœ
      fid: 100,
      cls: 0.1
    };
    
    const newPerformance = {
      lcp: 2500, // æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã®ç¶­æŒ
      fid: 100,
      cls: 0.1
    };
    
    return JSON.stringify(existingPerformance) === JSON.stringify(newPerformance);
  }
}
```

#### **3. ã‚½ãƒ¼ã‚¹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã®æ•´åˆæ€§æ¤œè¨¼**
```typescript
// âœ… Good - ã‚½ãƒ¼ã‚¹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´åˆæ€§ã®æ¤œè¨¼
export interface SourceDocumentAlignmentVerification {
  // coding-standards.mdã¨ã®æ•´åˆæ€§
  codingStandardsAlignment: {
    dryPrinciple: boolean;          // DRYåŸå‰‡ã®æº–æ‹ 
    kissPrinciple: boolean;         // KISSåŸå‰‡ã®æº–æ‹ 
    esModules: boolean;             // ES Modulesä½¿ç”¨ç‡
    strictTypeScript: boolean;      // Strict TypeScript Modeæº–æ‹ 
    testArtifactCleanup: boolean;   // ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
  };
  
  // ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã®æ•´åˆæ€§
  architectureDocumentAlignment: {
    componentDesign: boolean;        // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆã®æ•´åˆæ€§
    dataFlowDesign: boolean;        // ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼è¨­è¨ˆã®æ•´åˆæ€§
    interfaceDesign: boolean;       // ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨­è¨ˆã®æ•´åˆæ€§
    performanceDesign: boolean;     // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­è¨ˆã®æ•´åˆæ€§
  };
  
  // Story 2ã®æˆæœã¨ã®æ•´åˆæ€§
  story2IntegrationAlignment: {
    existingComponents: boolean;     // æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã®æ•´åˆæ€§
    existingUtilities: boolean;      // æ—¢å­˜ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã¨ã®æ•´åˆæ€§
    existingTypes: boolean;          // æ—¢å­˜å‹å®šç¾©ã¨ã®æ•´åˆæ€§
    existingPatterns: boolean;       // æ—¢å­˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®æ•´åˆæ€§
  };
}

// ã‚½ãƒ¼ã‚¹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´åˆæ€§ã®æ¤œè¨¼
export class SourceDocumentAlignmentValidator {
  validateAlignment(): SourceDocumentAlignmentVerification {
    return {
      codingStandardsAlignment: {
        dryPrinciple: this.validateDRYPrinciple(),
        kissPrinciple: this.validateKISSPrinciple(),
        esModules: this.validateESModules(),
        strictTypeScript: this.validateStrictTypeScript(),
        testArtifactCleanup: this.validateTestArtifactCleanup()
      },
      architectureDocumentAlignment: {
        componentDesign: this.validateComponentDesign(),
        dataFlowDesign: this.validateDataFlowDesign(),
        interfaceDesign: this.validateInterfaceDesign(),
        performanceDesign: this.validatePerformanceDesign()
      },
      story2IntegrationAlignment: {
        existingComponents: this.validateExistingComponents(),
        existingUtilities: this.validateExistingUtilities(),
        existingTypes: this.validateExistingTypes(),
        existingPatterns: this.validateExistingPatterns()
      }
    };
  }
  
  private validateDRYPrinciple(): boolean {
    // DRYåŸå‰‡ã®æº–æ‹ ç¢ºèª
    const dryViolations = [
      'é‡è¤‡ã—ãŸãƒ¡ã‚¿ã‚¿ã‚°ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯',
      'é‡è¤‡ã—ãŸã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯',
      'é‡è¤‡ã—ãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ãƒ­ã‚¸ãƒƒã‚¯'
    ];
    
    // é‡è¤‡ã®æ¤œå‡ºã¨æ¤œè¨¼
    return dryViolations.every(violation => 
      !this.detectDuplication(violation)
    );
  }
  
  private validateKISSPrinciple(): boolean {
    // KISSåŸå‰‡ã®æº–æ‹ ç¢ºèª
    const kissViolations = [
      'éåº¦ã«è¤‡é›‘ãªæŠ½è±¡åŒ–',
      'ä¸å¿…è¦ãªãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã®é©ç”¨',
      'è¤‡é›‘ãªçŠ¶æ…‹ç®¡ç†'
    ];
    
    // è¤‡é›‘æ€§ã®æ¤œå‡ºã¨æ¤œè¨¼
    return kissViolations.every(violation => 
      !this.detectComplexity(violation)
    );
  }
  
  private validateESModules(): boolean {
    // ES Modulesä½¿ç”¨ç‡ã®ç¢ºèª
    const totalFiles = this.countTotalFiles();
    const esModuleFiles = this.countESModuleFiles();
    
    return (esModuleFiles / totalFiles) === 1.0; // 100%
  }
  
  private validateStrictTypeScript(): boolean {
    // Strict TypeScript Modeæº–æ‹ ã®ç¢ºèª
    const typeErrors = this.countTypeErrors();
    const implicitAnyErrors = this.countImplicitAnyErrors();
    const implicitReturnErrors = this.countImplicitReturnErrors();
    
    return typeErrors === 0 && implicitAnyErrors === 0 && implicitReturnErrors === 0;
  }
  
  private validateTestArtifactCleanup(): boolean {
    // ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ç¢ºèª
    const testArtifacts = [
      'ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«',
      'ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿',
      'ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ¼ãƒ‰'
    ];
    
    return testArtifacts.every(artifact => 
      !this.detectTestArtifact(artifact)
    );
  }
}
```

### **æ¤œè¨¼çµæœã®è¨˜éŒ²ã¨è¿½è·¡**

#### **1. æ¤œè¨¼çµæœã®è¨˜éŒ²**
```typescript
// âœ… Good - æ¤œè¨¼çµæœã®è¨˜éŒ²
export interface VerificationResultRecord {
  // æ¤œè¨¼å®Ÿè¡Œæƒ…å ±
  verificationInfo: {
    timestamp: Date;
    version: string;
    executor: string;
    environment: string;
  };
  
  // æ¤œè¨¼çµæœ
  verificationResults: {
    technicalSpecification: TechnicalSpecificationVerification;
    architectureAlignment: ArchitectureAlignmentVerification;
    sourceDocumentAlignment: SourceDocumentAlignmentVerification;
  };
  
  // æ¤œè¨¼ã‚µãƒãƒªãƒ¼
  verificationSummary: {
    overallStatus: 'PASS' | 'FAIL' | 'PARTIAL';
    passedChecks: number;
    failedChecks: number;
    totalChecks: number;
    recommendations: string[];
  };
}

// æ¤œè¨¼çµæœã®è¨˜éŒ²
export class VerificationResultRecorder {
  recordVerificationResult(verification: VerificationResultRecord): void {
    // æ¤œè¨¼çµæœã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜éŒ²
    const resultFile = `verification-results-${verification.verificationInfo.timestamp.toISOString()}.json`;
    
    // æ¤œè¨¼çµæœã®æ°¸ç¶šåŒ–
    this.persistVerificationResult(resultFile, verification);
    
    // æ¤œè¨¼ã‚µãƒãƒªãƒ¼ã®å‡ºåŠ›
    this.outputVerificationSummary(verification.verificationSummary);
    
    // æ¨å¥¨äº‹é …ã®å‡ºåŠ›
    this.outputRecommendations(verification.verificationSummary.recommendations);
  }
  
  private persistVerificationResult(filename: string, verification: VerificationResultRecord): void {
    // æ¤œè¨¼çµæœã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜
    const fs = require('fs');
    fs.writeFileSync(filename, JSON.stringify(verification, null, 2));
    
    console.log(`âœ… æ¤œè¨¼çµæœã‚’ä¿å­˜ã—ã¾ã—ãŸ: ${filename}`);
  }
  
  private outputVerificationSummary(summary: any): void {
    console.log(`\nğŸ“Š æ¤œè¨¼ã‚µãƒãƒªãƒ¼`);
    console.log(`ç·åˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ${summary.overallStatus}`);
    console.log(`åˆæ ¼ãƒã‚§ãƒƒã‚¯: ${summary.passedChecks}/${summary.totalChecks}`);
    console.log(`ä¸åˆæ ¼ãƒã‚§ãƒƒã‚¯: ${summary.failedChecks}/${summary.totalChecks}`);
  }
  
  private outputRecommendations(recommendations: string[]): void {
    if (recommendations.length > 0) {
      console.log(`\nğŸ’¡ æ¨å¥¨äº‹é …:`);
      recommendations.forEach((rec, index) => {
        console.log(`${index + 1}. ${rec}`);
      });
    }
  }
}
```

#### **2. ç¶™ç¶šçš„æ¤œè¨¼ã®å®Ÿè£…**
```typescript
// âœ… Good - ç¶™ç¶šçš„æ¤œè¨¼ã®å®Ÿè£…
export class ContinuousVerificationManager {
  // ç¶™ç¶šçš„æ¤œè¨¼ã®å®Ÿè¡Œ
  async runContinuousVerification(): Promise<void> {
    console.log('ğŸ”„ ç¶™ç¶šçš„æ¤œè¨¼ã‚’é–‹å§‹ã—ã¾ã™...');
    
    // 1. æŠ€è¡“ä»•æ§˜ã®æ¤œè¨¼
    const technicalSpecVerification = await this.verifyTechnicalSpecification();
    
    // 2. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ•´åˆæ€§ã®æ¤œè¨¼
    const architectureVerification = await this.verifyArchitectureAlignment();
    
    // 3. ã‚½ãƒ¼ã‚¹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´åˆæ€§ã®æ¤œè¨¼
    const sourceDocVerification = await this.verifySourceDocumentAlignment();
    
    // 4. æ¤œè¨¼çµæœã®çµ±åˆ
    const verificationResult: VerificationResultRecord = {
      verificationInfo: {
        timestamp: new Date(),
        version: '1.0.0',
        executor: 'ContinuousVerificationManager',
        environment: process.env.NODE_ENV || 'development'
      },
      verificationResults: {
        technicalSpecification: technicalSpecVerification,
        architectureAlignment: architectureVerification,
        sourceDocumentAlignment: sourceDocVerification
      },
      verificationSummary: this.generateVerificationSummary([
        technicalSpecVerification,
        architectureVerification,
        sourceDocVerification
      ])
    };
    
    // 5. æ¤œè¨¼çµæœã®è¨˜éŒ²
    const recorder = new VerificationResultRecorder();
    recorder.recordVerificationResult(verificationResult);
    
    // 6. æ¤œè¨¼çµæœã®é€šçŸ¥
    await this.notifyVerificationResult(verificationResult);
    
    console.log('âœ… ç¶™ç¶šçš„æ¤œè¨¼ãŒå®Œäº†ã—ã¾ã—ãŸ');
  }
  
  private generateVerificationSummary(verifications: any[]): any {
    // æ¤œè¨¼çµæœã®ã‚µãƒãƒªãƒ¼ç”Ÿæˆ
    const totalChecks = verifications.reduce((sum, v) => sum + this.countTotalChecks(v), 0);
    const passedChecks = verifications.reduce((sum, v) => sum + this.countPassedChecks(v), 0);
    const failedChecks = totalChecks - passedChecks;
    
    let overallStatus: 'PASS' | 'FAIL' | 'PARTIAL';
    if (failedChecks === 0) {
      overallStatus = 'PASS';
    } else if (passedChecks === 0) {
      overallStatus = 'FAIL';
    } else {
      overallStatus = 'PARTIAL';
    }
    
    return {
      overallStatus,
      passedChecks,
      failedChecks,
      totalChecks,
      recommendations: this.generateRecommendations(verifications)
    };
  }
  
  private async notifyVerificationResult(verification: VerificationResultRecord): Promise<void> {
    // æ¤œè¨¼çµæœã®é€šçŸ¥ï¼ˆDiscordã€Slackç­‰ï¼‰
    if (verification.verificationSummary.overallStatus === 'FAIL') {
      await this.sendFailureNotification(verification);
    } else if (verification.verificationSummary.overallStatus === 'PARTIAL') {
      await this.sendPartialSuccessNotification(verification);
    } else {
      await this.sendSuccessNotification(verification);
    }
  }
}
```

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2024-12-19 | v1.0.0 | Story 3ã®åˆæœŸãƒ‰ãƒ©ãƒ•ãƒˆä½œæˆ | Product Owner |
| 2024-12-19 | v1.1.0 | Tasks / Subtasksã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ  | Product Owner |
| 2024-12-19 | v1.2.0 | Dev Notesã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ  | Product Owner |
| 2024-12-19 | v1.3.0 | Change Logã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ  | Product Owner |

## Dev Agent Record

### **Agent Model Used**
<!-- é–‹ç™ºã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒä½¿ç”¨ã—ãŸAIãƒ¢ãƒ‡ãƒ«ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨˜éŒ² -->

### **Debug Log References**
<!-- é–‹ç™ºä¸­ã«ç”Ÿæˆã•ã‚ŒãŸãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã‚„ãƒˆãƒ¬ãƒ¼ã‚¹ã®å‚ç…§ -->

### **Completion Notes List**
<!-- ã‚¿ã‚¹ã‚¯ã®å®Œäº†ã«é–¢ã™ã‚‹æ³¨æ„äº‹é …ã‚„é­é‡ã—ãŸå•é¡Œã®ãƒªã‚¹ãƒˆ -->

### **File List**
<!-- ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å®Ÿè£…ä¸­ã«ä½œæˆã€å¤‰æ›´ã€å½±éŸ¿ã‚’å—ã‘ãŸã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªã‚¹ãƒˆ -->

## QA Results
<!-- QAã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã‚‹å®Œäº†ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å®Ÿè£…ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœ -->

---

**å®Œäº†**: Story 3ï¼ˆMetaManager.astroã®å®Ÿè£…ã¨çµ±åˆï¼‰ã®å®Œå…¨æ›´æ–°å®Œäº†

### **æœ€çµ‚æ›´æ–°å®Œäº†é …ç›®**
- âœ… **æŠ€è¡“ä»•æ§˜ã®æ¤œè¨¼å¯èƒ½æ€§**: å®Œå…¨å®Ÿè£…å®Œäº†
- âœ… **å®Ÿè£…ã‚¬ã‚¤ãƒ‰ã®è©³ç´°åŒ–**: ã‚¿ã‚¹ã‚¯ã¨ã®é–¢é€£ä»˜ã‘å®Œäº†
- âœ… **ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã®æ˜ç¢ºåŒ–**: å…·ä½“çš„ãªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å®Œäº†
- âœ… **æŠ€è¡“çš„æ±ºå®šã®æ¤œè¨¼å¯èƒ½æ€§**: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã®æ•´åˆæ€§å®Œäº†
- âœ… **ç¶™ç¶šçš„æ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ **: å®Œå…¨å®Ÿè£…å®Œäº†
