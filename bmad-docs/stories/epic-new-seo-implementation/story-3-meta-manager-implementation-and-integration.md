<!-- Powered by BMADâ„¢ Core -->

# Story 3: MetaManager.astroã®å®Ÿè£…ã¨çµ±åˆ

## Status

**ğŸ¯ READY FOR IMPLEMENTATION** - é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿè£…
**ğŸ“‹ REQUIREMENTS DEFINED** - Story 1ã¨Story 2ã®åŸºæœ¬ã‚·ã‚¹ãƒ†ãƒ å®Œäº†
**ğŸ”§ TECHNICAL SPECIFICATION** - MetaManager.astroã®å®Ÿè£…ä»•æ§˜å®Œäº†

## Story

**As a** é–‹ç™ºè€…,
**I want** MetaManager.astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®Ÿè£…ã—ã€3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®Œå…¨çµ±åˆã™ã‚‹,
**So that** é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–ãŒå¯èƒ½ã«ãªã‚Šã€å®Œå…¨ãªSEOã‚·ã‚¹ãƒ†ãƒ ãŒæ§‹ç¯‰ã§ãã‚‹.

## é«˜æ ¡ç”Ÿå‘ã‘èª¬æ˜

### ğŸ¯ ä½•ã‚’ã‚„ã‚‹ã®ï¼Ÿ

Story 1ã¨Story 2ã§ä½œã£ãŸåŸºæœ¬ã‚·ã‚¹ãƒ†ãƒ ã«ã€é«˜åº¦ãªæ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹æœ€å¾Œã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã‚‹ã‚“ã ã€‚

**MetaManager.astroã£ã¦ä½•ï¼Ÿ**
- é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ï¼‰
- 3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ±åˆã™ã‚‹å¸ä»¤å¡”
- æœ€ã‚‚é«˜åº¦ãªæ©Ÿèƒ½ã‚’æŒã¤ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**ãªãœ3ã¤ç›®ãŒå¿…è¦ãªã®ï¼Ÿ**
- åŸºæœ¬æ©Ÿèƒ½ã ã‘ã§ã¯ä¸ååˆ†ãªå ´åˆãŒã‚ã‚‹
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å¼·åŒ–ã—ãŸã„
- ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã‚„é«˜åº¦ãªSEOè¨­å®šãŒå¿…è¦

### ğŸ”§ ã©ã†ã‚„ã£ã¦å®Ÿè£…ã™ã‚‹ã®ï¼Ÿ

1. **MetaManager.astroã®å®Ÿè£…**: é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†æ©Ÿèƒ½
2. **3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Œå…¨çµ±åˆ**: é€£æºã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**: ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚é–“ã¨ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®æœ€é©åŒ–
4. **é«˜åº¦ãªæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ**: çµ±åˆã‚·ã‚¹ãƒ†ãƒ ã®å‹•ä½œç¢ºèª

## Acceptance Criteria

### **MetaManager.astroå®Ÿè£…è¦ä»¶**

1. **é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã®åŸºæœ¬å®Ÿè£…**
   - é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¨­å®šï¼ˆrobotsã€theme-colorã€color-schemeï¼‰
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆpreloadã€prefetchã€dns-prefetchï¼‰
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆCSPã€HSTSã€referrer-policyï¼‰

2. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–æ©Ÿèƒ½ã®å®Ÿè£…**
   - ãƒªã‚½ãƒ¼ã‚¹ã®äº‹å‰èª­ã¿è¾¼ã¿ï¼ˆpreloadï¼‰
   - ãƒªã‚½ãƒ¼ã‚¹ã®äº‹å‰å–å¾—ï¼ˆprefetchï¼‰
   - DNSäº‹å‰è§£æ±ºï¼ˆdns-prefetchï¼‰
   - äº‹å‰æ¥ç¶šï¼ˆpreconnectï¼‰

3. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼æ©Ÿèƒ½ã®å®Ÿè£…**
   - Content Security Policyï¼ˆCSPï¼‰
   - HTTP Strict Transport Securityï¼ˆHSTSï¼‰
   - Referrer Policy
   - Permissions Policy

4. **ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹çµ±åˆæ©Ÿèƒ½ã®å®Ÿè£…**
   - Google Analyticsï¼ˆgtagï¼‰
   - Google Tag Managerï¼ˆGTMï¼‰
   - Facebook Pixel
   - Twitter Analytics

### **é«˜åº¦æ©Ÿèƒ½å®Ÿè£…è¦ä»¶**

5. **é«˜åº¦ãªSEOè¨­å®šæ©Ÿèƒ½ã®å®Ÿè£…**
   - ä»£æ›¿è¨€èªè¨­å®šï¼ˆalternate languagesï¼‰
   - é«˜åº¦ãªæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆSchema.orgï¼‰
   - ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆï¼ˆbreadcrumbsï¼‰
   - ã‚µã‚¤ãƒˆãƒãƒƒãƒ—é–¢é€£è¨­å®š

6. **æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã®é«˜åº¦ãªç”Ÿæˆ**
   - è¤‡é›‘ãªSchema.orgæ§‹é€ 
   - å‹•çš„ãƒ‡ãƒ¼ã‚¿ã®çµ±åˆ
   - ã‚«ã‚¹ã‚¿ãƒ æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿
   - æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³æœ€é©åŒ–

7. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–æ©Ÿèƒ½ã®å®Ÿè£…**
   - ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚é–“ã®æ¸¬å®š
   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®ç›£è¦–
   - ãƒªã‚½ãƒ¼ã‚¹èª­ã¿è¾¼ã¿æ™‚é–“ã®æ¸¬å®š
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®åé›†

### **çµ±åˆæ©Ÿèƒ½è¦ä»¶**

8. **3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Œå…¨çµ±åˆ**
   - çµ±åˆå‹å®šç¾©ã®å®Ÿè£…
   - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®å®Œå…¨é€£æº
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®çµ±åˆ
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã®çµ±åˆ

9. **é«˜åº¦ãªæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ**
   - 3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çµ±åˆãƒ†ã‚¹ãƒˆ
   - é«˜åº¦ãªæ©Ÿèƒ½ã®å‹•ä½œç¢ºèª
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

## General Principles

### 1. é«˜åº¦æ€§ã¨æŸ”è»Ÿæ€§ã®ä¸¡ç«‹
- é«˜åº¦ãªæ©Ÿèƒ½ã‚’æä¾›ã—ã¤ã¤ã€å¿…è¦ã«å¿œã˜ã¦ç„¡åŠ¹åŒ–å¯èƒ½
- è¨­å®šã®æŸ”è»Ÿæ€§ã‚’ç¢ºä¿
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿ã‚’æœ€å°åŒ–

### 2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ã®é©åˆ‡ãªè¨­å®š
- XSSå¯¾ç­–ã®å®Ÿè£…
- CSRFå¯¾ç­–ã®å®Ÿè£…
- ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ã®å®Ÿè£…

### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚é–“ã®æœ€é©åŒ–
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®æœ€é©åŒ–
- ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºã®æœ€é©åŒ–
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã®æœ€é©åŒ–

### 4. çµ±åˆæ€§ã®ç¢ºä¿
- 3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Œå…¨é€£æº
- ä¸€è²«ã—ãŸAPIè¨­è¨ˆ
- çµ±ä¸€ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- çµ±åˆã•ã‚ŒãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–

## ğŸš« DEV AGENTåˆ¶ç´„äº‹é …ï¼ˆMANDATORYï¼‰

### ğŸš¨ çµ¶å¯¾ç¦æ­¢äº‹é …
- **æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å¤‰æ›´**: Story 2ã§ä½œæˆã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ä¸€åˆ‡å¤‰æ›´ã—ãªã„
- **æ–°è¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å°å…¥**: æ—¢å­˜ã®Astro.jsä»¥å¤–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ä½¿ç”¨ã—ãªã„
- **æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã®å¤‰æ›´**: æ—¢å­˜ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯å¤‰æ›´ã—ãªã„
- **å¤ã„ã‚·ã‚¹ãƒ†ãƒ ã®ä½µç”¨**: å¤ã„SEOã‚·ã‚¹ãƒ†ãƒ ã¨ã®ä½µç”¨ã¯ç¦æ­¢
- **CommonJSã®ä½¿ç”¨**: `require`/`module.exports`ã®ä½¿ç”¨ã¯çµ¶å¯¾ç¦æ­¢
- **Strict TypeScript modeé•å**: æš—é»™çš„ãª`any`å‹ã€æš—é»™çš„ãªæˆ»ã‚Šå€¤å‹ã¯ç¦æ­¢
- **ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®æ®‹å­˜**: ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã€ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ¼ãƒ‰ã®æ®‹å­˜ã¯ç¦æ­¢

### âœ… è¨±å¯ã•ã‚Œã‚‹ä½œæ¥­
- **æ–°è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ**: `src/components/public-components/MetaManager.astro`ã®ä½œæˆ
- **Story 1ã®å‹å®šç¾©ã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ä½¿ç”¨**: æ—¢ã«ä½œæˆã—ãŸã‚·ã‚¹ãƒ†ãƒ ã®æ´»ç”¨
- **Story 2ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã®çµ±åˆ**: æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã®é€£æº
- **æ—¢å­˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®æ´»ç”¨**: æ—¢å­˜ã®`src/components/public-components/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½¿ç”¨

## ğŸ”§ å®Ÿè£…ã‚¬ã‚¤ãƒ‰

### **ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ **
```
src/components/public-components/
â”œâ”€â”€ HeadSEO.astro           # åŸºæœ¬çš„ãªHTML headè¦ç´ 
â”œâ”€â”€ BasicSEO.astro          # SEOç‰¹åŒ–æ©Ÿèƒ½
â”œâ”€â”€ MetaManager.astro       # é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†
â””â”€â”€ __tests__/              # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
    â”œâ”€â”€ HeadSEO.test.ts
    â”œâ”€â”€ BasicSEO.test.ts
    â””â”€â”€ MetaManager.test.ts

src/utils/new-seo-system/
â”œâ”€â”€ meta-manager.ts         # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚¯ãƒ©ã‚¹ï¼ˆES Moduleså¿…é ˆï¼‰
â”œâ”€â”€ performance-optimizer.ts # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
â”œâ”€â”€ security-manager.ts     # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç®¡ç†
â””â”€â”€ analytics-integration.ts # ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹çµ±åˆ
```

### **å®Ÿè£…é †åº**
1. **MetaManager.astroã®åŸºæœ¬å®Ÿè£…**
2. **é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†æ©Ÿèƒ½ã®å®Ÿè£…**
3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–æ©Ÿèƒ½ã®å®Ÿè£…**
4. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼æ©Ÿèƒ½ã®å®Ÿè£…**
5. **ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹çµ±åˆæ©Ÿèƒ½ã®å®Ÿè£…**
6. **3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Œå…¨çµ±åˆ**
7. **é«˜åº¦ãªæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ**
8. **ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆMANDATORYï¼‰**

### **æŠ€è¡“çš„è€ƒæ…®äº‹é …**
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: é«˜åº¦ãªæ©Ÿèƒ½ã«ã‚ˆã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿ã‚’æœ€å°åŒ–
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ã®é©åˆ‡ãªè¨­å®šã¨ãƒ†ã‚¹ãƒˆ
- **æ‹¡å¼µæ€§**: å°†æ¥ã®æ©Ÿèƒ½è¿½åŠ ã«å¯¾å¿œã§ãã‚‹æŸ”è»Ÿãªè¨­è¨ˆ
- **ä¿å®ˆæ€§**: è¤‡é›‘ãªæ©Ÿèƒ½ã‚’é©åˆ‡ã«åˆ†å‰²ã—ã€ä¿å®ˆã—ã‚„ã™ã„æ§‹é€ 

### **coding-standards.mdæº–æ‹ ã®å®Ÿè£…åŸå‰‡ï¼ˆMANDATORYï¼‰**

#### 1. DRYåŸå‰‡ã®é©ç”¨ï¼ˆMANDATORYï¼‰
```typescript
// âœ… Good - å…±é€šã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã‚’ä½œæˆï¼ˆDRYåŸå‰‡ï¼‰
// src/utils/new-seo-system/meta-manager.ts
export class NewSEOMetaManager {
  private generateMetaTag(name: string, content: string): string {
    const escapedContent = content.replace(/"/g, '&quot;');
    return `<meta name="${name}" content="${escapedContent}" />`;
  }
  
  private generateLinkTag(rel: string, href: string, type?: string): string {
    const typeAttr = type ? ` type="${type}"` : '';
    return `<link rel="${rel}" href="${href}"${typeAttr} />`;
  }
  
  // å…±é€šã®ãƒ¡ã‚¿ã‚¿ã‚°ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ã‚’å†åˆ©ç”¨
  generateAdvancedMeta(config: AdvancedMetaConfig): string[] {
    const tags: string[] = [];
    
    if (config.robots) {
      tags.push(this.generateMetaTag('robots', config.robots));
    }
    
    if (config.themeColor) {
      tags.push(this.generateMetaTag('theme-color', config.themeColor));
    }
    
    return tags;
  }
}

// âŒ Bad - é‡è¤‡ã—ãŸãƒ¡ã‚¿ã‚¿ã‚°ç”Ÿæˆï¼ˆDRYåŸå‰‡é•åï¼‰
class PerformanceOptimizer {
  generatePreloadTag(href: string, as: string): string {
    return `<link rel="preload" href="${href}" as="${as}" />`;
  }
}

class SecurityManager {
  generateCSPTag(content: string): string {
    return `<meta http-equiv="Content-Security-Policy" content="${content}" />`;
  }
}
```

#### 2. KISSåŸå‰‡ã®é©ç”¨ï¼ˆMANDATORYï¼‰
```typescript
// âœ… Good - ã‚·ãƒ³ãƒ—ãƒ«ã§ç†è§£ã—ã‚„ã™ã„ã‚¯ãƒ©ã‚¹æ§‹é€ ï¼ˆKISSåŸå‰‡ï¼‰
export class PerformanceOptimizer {
  generateTags(optimization: PerformanceOptimizationProps): string[] {
    const tags: string[] = [];
    
    // Preload tags
    if (optimization.preload) {
      optimization.preload.forEach(resource => {
        tags.push(`<link rel="preload" href="${resource.href}" as="${resource.as}" />`);
      });
    }
    
    // Prefetch tags
    if (optimization.prefetch) {
      optimization.prefetch.forEach(resource => {
        tags.push(`<link rel="prefetch" href="${resource}" />`);
      });
    }
    
    return tags;
  }
}

// âŒ Bad - éåº¦ã«è¤‡é›‘ãªæŠ½è±¡åŒ–ï¼ˆKISSåŸå‰‡é•åï¼‰
interface OptimizationStrategy {
  generateTags(): string[];
}

class PreloadStrategy implements OptimizationStrategy {
  generateTags(): string[] {
    // è¤‡é›‘ãªå®Ÿè£…
  }
}

class PrefetchStrategy implements OptimizationStrategy {
  generateTags(): string[] {
    // è¤‡é›‘ãªå®Ÿè£…
  }
}
```

#### 3. ES Modulesã®å¿…é ˆä½¿ç”¨ï¼ˆMANDATORYï¼‰
```typescript
// âœ… Good - ES Modules (MANDATORY)
import type { MetaManagerProps } from '@/types/new-seo-system';
import { NewSEOMetaManager } from '@/utils/new-seo-system/meta-manager';
import { PerformanceOptimizer } from '@/utils/new-seo-system/performance-optimizer';
import { SecurityManager } from '@/utils/new-seo-system/security-manager';

export class MetaManagerIntegration {
  private metaManager: NewSEOMetaManager;
  private performanceOptimizer: PerformanceOptimizer;
  private securityManager: SecurityManager;
  
  constructor() {
    this.metaManager = new NewSEOMetaManager();
    this.performanceOptimizer = new PerformanceOptimizer();
    this.securityManager = new SecurityManager();
  }
}

// âŒ Bad - CommonJS (NOT ALLOWED)
const { MetaManagerProps } = require('@/types/new-seo-system');
const NewSEOMetaManager = require('@/utils/new-seo-system/meta-manager');
```

#### 4. Strict TypeScript Modeã®å¿…é ˆä½¿ç”¨ï¼ˆMANDATORYï¼‰
```typescript
// âœ… Good - Strict TypeScript Mode (MANDATORY)
interface MetaGenerationResult {
  metaTags: string[];
  structuredData: string;
  performanceHints: string[];
  securityHeaders: string[];
}

export class NewSEOMetaManager {
  // æ˜ç¤ºçš„ãªæˆ»ã‚Šå€¤å‹ï¼ˆstrict modeè¦ä»¶ï¼‰
  generateMetaTags(config: MetaManagerProps): MetaGenerationResult {
    const result: MetaGenerationResult = {
      metaTags: [],
      structuredData: '',
      performanceHints: [],
      securityHeaders: []
    };
    
    // ãƒ¡ã‚¿ã‚¿ã‚°ã®ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
    if (config.advancedMeta) {
      result.metaTags.push(...this.generateAdvancedMeta(config.advancedMeta));
    }
    
    return result;
  }
  
  // æ˜ç¤ºçš„ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å‹ï¼ˆstrict modeè¦ä»¶ï¼‰
  private generateAdvancedMeta(config: AdvancedMetaConfig): string[] {
    const tags: string[] = [];
    
    if (config.robots) {
      tags.push(`<meta name="robots" content="${config.robots}" />`);
    }
    
    return tags;
  }
}

// âŒ Bad - Implicit any (NOT ALLOWED in strict mode)
function generateMetaTags(config) { // å‹æ³¨é‡ˆãªã—
  // å®Ÿè£…
}
```

#### 5. ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆMANDATORYï¼‰
```typescript
// âœ… Good - ãƒ†ã‚¹ãƒˆå®Œäº†å¾Œã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆMANDATORYï¼‰
describe('MetaManager Integration Tests', () => {
  let testData: any;
  
  beforeEach(() => {
    // ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æº–å‚™
    testData = createTestData();
  });
  
  afterEach(() => {
    // ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
    cleanup();
    testData = null;
  });
  
  afterAll(() => {
    // æœ€çµ‚ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
    finalCleanup();
  });
});

// âŒ Bad - ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®æ®‹å­˜ï¼ˆNOT ALLOWEDï¼‰
// ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã€ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ¼ãƒ‰ãŒæ®‹å­˜
```

## ğŸ“‹ è©³ç´°å®Ÿè£…ä»•æ§˜

### **MetaManager.astroã®è©³ç´°å®Ÿè£…ï¼ˆcoding-standards.mdæº–æ‹ ï¼‰**
```astro
---
// ========== IMPORTS ==========
// Type definitions (ES Moduleså¿…é ˆ)
import type { MetaManagerProps } from '@/types/new-seo-system';

// Utility classes (ES Moduleså¿…é ˆ)
import { NewSEOMetaManager } from '@/utils/new-seo-system/meta-manager';
import { PerformanceOptimizer } from '@/utils/new-seo-system/performance-optimizer';
import { SecurityManager } from '@/utils/new-seo-system/security-manager';
import { AnalyticsIntegration } from '@/utils/new-seo-system/analytics-integration';

// ========== PROPS INTERFACE ==========
interface Props extends MetaManagerProps {
  // è¿½åŠ ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
}

// ========== PROPS DESTRUCTURING ==========
const {
  advancedMeta = {},
  performanceOptimization = {},
  securityHeaders = {},
  analytics = {}
}: Props = Astro.props;

// ========== UTILITY CLASSES INITIALIZATION ==========
// å„æ©Ÿèƒ½ã‚’æ‹…å½“ã™ã‚‹ã‚¯ãƒ©ã‚¹ã®åˆæœŸåŒ–ï¼ˆå˜ä¸€è²¬ä»»ã®åŸå‰‡ï¼‰
const metaManager = new NewSEOMetaManager();
const performanceOptimizer = new PerformanceOptimizer();
const securityManager = new SecurityManager();
const analyticsIntegration = new AnalyticsIntegration();

// ========== META TAG GENERATION ==========
// å„ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã—ã¦ãƒ¡ã‚¿ã‚¿ã‚°ã‚’ç”Ÿæˆï¼ˆDRYåŸå‰‡ï¼‰
const advancedMetaTags = metaManager.generateAdvancedMeta(advancedMeta);
const performanceTags = performanceOptimizer.generateTags(performanceOptimization);
const securityTags = securityManager.generateHeaders(securityHeaders);
const analyticsTags = analyticsIntegration.generateTags(analytics);

// ========== INTEGRATION ==========
// çµ±åˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆï¼ˆKISSåŸå‰‡ï¼‰
const integratedMeta = metaManager.integrateAll({
  advanced: advancedMetaTags,
  performance: performanceTags,
  security: securityTags,
  analytics: analyticsTags
});
---

<!-- ========== ADVANCED META TAGS ========== -->
{integratedMeta.advanced}

<!-- ========== PERFORMANCE OPTIMIZATION ========== -->
{integratedMeta.performance}

<!-- ========== SECURITY HEADERS ========== -->
{integratedMeta.security}

<!-- ========== ANALYTICS ========== -->
{integratedMeta.analytics}

<!-- ========== DEVELOPMENT ENVIRONMENT DEBUG INFO ========== -->
{import.meta.env.DEV && (
  <div class="meta-manager-debug" style="display: none;">
    <h3>Meta Manager Debug Info</h3>
    <pre>{JSON.stringify(integratedMeta, null, 2)}</pre>
  </div>
)}
```

### **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…ï¼ˆDRYåŸå‰‡ã¨KISSåŸå‰‡ã®ä¸¡ç«‹ï¼‰**
```typescript
// src/utils/new-seo-system/performance-optimizer.ts
// ========== PERFORMANCE OPTIMIZER ==========
// Simple, focused performance optimization (KISS principle)

export interface PerformanceOptimizationProps {
  preload?: Array<{ href: string; as: string }>;
  prefetch?: string[];
  dnsPrefetch?: string[];
  preconnect?: string[];
}

export class PerformanceOptimizer {
  // ã‚·ãƒ³ãƒ—ãƒ«ã§ç†è§£ã—ã‚„ã™ã„ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆKISSåŸå‰‡ï¼‰
  generateTags(optimization: PerformanceOptimizationProps): string[] {
    const tags: string[] = [];
    
    // Preload tags
    if (optimization.preload) {
      optimization.preload.forEach(resource => {
        tags.push(`<link rel="preload" href="${resource.href}" as="${resource.as}" />`);
      });
    }
    
    // Prefetch tags
    if (optimization.prefetch) {
      optimization.prefetch.forEach(resource => {
        tags.push(`<link rel="prefetch" href="${resource}" />`);
      });
    }
    
    // DNS prefetch
    if (optimization.dnsPrefetch) {
      optimization.dnsPrefetch.forEach(domain => {
        tags.push(`<link rel="dns-prefetch" href="${domain}" />`);
      });
    }
    
    // Preconnect
    if (optimization.preconnect) {
      optimization.preconnect.forEach(domain => {
        tags.push(`<link rel="preconnect" href="${domain}" />`);
      });
    }
    
    return tags;
  }
}
```

### **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç®¡ç†ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…ï¼ˆKISSåŸå‰‡ã®é©ç”¨ï¼‰**
```typescript
// src/utils/new-seo-system/security-manager.ts
// ========== SECURITY MANAGER ==========
// Simple, focused security management (KISS principle)

export interface SecurityHeadersProps {
  csp?: string;
  hsts?: string;
  referrerPolicy?: string;
  permissionsPolicy?: string;
}

export class SecurityManager {
  // ã‚·ãƒ³ãƒ—ãƒ«ã§ç†è§£ã—ã‚„ã™ã„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ç”Ÿæˆï¼ˆKISSåŸå‰‡ï¼‰
  generateHeaders(security: SecurityHeadersProps): string[] {
    const headers: string[] = [];
    
    // Content Security Policy
    if (security.csp) {
      headers.push(`<meta http-equiv="Content-Security-Policy" content="${security.csp}" />`);
    }
    
    // HTTP Strict Transport Security
    if (security.hsts) {
      headers.push(`<meta http-equiv="Strict-Transport-Security" content="${security.hsts}" />`);
    }
    
    // Referrer Policy
    if (security.referrerPolicy) {
      headers.push(`<meta name="referrer" content="${security.referrerPolicy}" />`);
    }
    
    // Permissions Policy
    if (security.permissionsPolicy) {
      headers.push(`<meta http-equiv="Permissions-Policy" content="${security.permissionsPolicy}" />`);
    }
    
    return headers;
  }
}
```

## ğŸ“‹ å®Œäº†æ¡ä»¶

### **å¿…é ˆå®Œäº†é …ç›®**
1. âœ… MetaManager.astroã®å®Ÿè£…å®Œäº†
2. âœ… é«˜åº¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†æ©Ÿèƒ½ã®å®Ÿè£…å®Œäº†
3. âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–æ©Ÿèƒ½ã®å®Ÿè£…å®Œäº†
4. âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼æ©Ÿèƒ½ã®å®Ÿè£…å®Œäº†
5. âœ… ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹çµ±åˆæ©Ÿèƒ½ã®å®Ÿè£…å®Œäº†
6. âœ… 3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Œå…¨çµ±åˆå®Œäº†
7. âœ… é«˜åº¦ãªæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆå®Œäº†
8. âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–å®Œäº†
9. âœ… ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†ï¼ˆMANDATORYï¼‰

### **å“è³ªåŸºæº–ï¼ˆcoding-standards.mdæº–æ‹ ï¼‰**
- TypeScriptå‹ã‚¨ãƒ©ãƒ¼ï¼š0ä»¶ï¼ˆStrict Modeå¿…é ˆï¼‰
- ES Modulesä½¿ç”¨ç‡ï¼š100%ï¼ˆCommonJSç¦æ­¢ï¼‰
- DRYåŸå‰‡é©ç”¨ç¢ºèªï¼šé‡è¤‡ã‚³ãƒ¼ãƒ‰0ä»¶
- KISSåŸå‰‡é©ç”¨ç¢ºèªï¼šéåº¦ãªæŠ½è±¡åŒ–ãªã—
- ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆï¼šä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ãƒ»ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ¼ãƒ‰0ä»¶
- çµ±åˆãƒ†ã‚¹ãƒˆæˆåŠŸç‡ï¼š100%
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šï¼š20%ä»¥ä¸Š
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ï¼šé©åˆ‡ã«è¨­å®šæ¸ˆã¿

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

ã“ã®Story 3ãŒå®Œäº†ã—ãŸã‚‰ã€æœ€å¾Œã®Story 4ï¼ˆãƒ†ã‚¹ãƒˆã¨å“è³ªä¿è¨¼ã®å®Œäº†ï¼‰ã«é€²ã¿ã¾ã™ã€‚

---

**å®Œäº†**: Story 3ï¼ˆMetaManager.astroã®å®Ÿè£…ã¨çµ±åˆï¼‰ã®å®šç¾©å®Œäº†
